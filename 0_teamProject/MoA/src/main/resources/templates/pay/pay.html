<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>결제창</title>
    <link th:href="@{/css/pay/pay.css}" rel="stylesheet" />
  </head>

  <body>
    
    <main class="payment-main">
      <button class="back-btn" onclick="history.back()">이전으로</button>
      <h2 class="page-title">결제</h2>

      <section class="payment-container">
        <input type="hidden" id="eventType" th:value="${ticketingInfo.eventType}" />
        <input type="hidden" id="boardNo" th:value="${ticketingInfo.boardNo}" />
        <input type="hidden" id="memberNo" th:value="${ticketingInfo.memberNo}" />

        <div class="payment-left">
          <!-- 예매 정보 -->
          <div class="section-block">
            <h3><span class="circle-number">1</span> 예매 정보</h3>
            <div class="booking-info">
              <img th:src="@{/images/common/perf1.jpg}" alt="포스터" />
              <div class="info-text">
                <p class="title" id="showTitle" th:text="${ticketingInfo.showName}">뮤지컬 렌트</p>
                <p>공연/전시명 : <span id="showName" th:text="${ticketingInfo.showName}">뮤지컬 렌트</span></p>
                <p>일시 : <span id="showDate" th:text="${ticketingInfo.showDate}">2025년 10월 5일 (토) 19:00</span></p>
                <p>장소 : <span id="showPlace" th:text="${ticketingInfo.showPlace}">○○아트센터 대극장</span></p>
              </div>
            </div>
          </div>

          <!-- 결제 옵션 -->
          <div class="section-block">
            <h3><span class="circle-number">2</span> 결제 옵션</h3>
            <select id="seatSelect">
              <option th:if="${ticketingInfo.eventType == 'exhibition'}"
              th:value="${ticketingInfo.price != null && ticketingInfo.price != '0' ? '전시 일반권' : '무료'}"
              th:data-price="${ticketingInfo.price != null && ticketingInfo.price != '0' ? ticketingInfo.price : 0}"
              th:text="${ticketingInfo.price != null && ticketingInfo.price != '0' ?
                        '전시 일반권, ' + #numbers.formatInteger(ticketingInfo.price, 3, 'COMMA') + '원' :
                        '무료'}">
              </option>
            </select>
          </div>

          <!-- 구매자 정보 -->
          <div class="section-block">
            <h3><span class="circle-number">3</span> 구매자 정보</h3>
            <p>이름 : <span id="buyerName" th:text="${member.memberNickname}">이름</span></p>
            <p>연락처 : <span id="buyerPhone" th:text="${member.memberTel}">전화번호</span></p>
            <p>이메일 : <span id="buyerEmail" th:text="${member.memberEmail}">이메일</span></p>
          </div>

          <!-- 결제 수단 -->
          <div class="section-block">
            <h3><span class="circle-number">4</span> 결제 수단</h3>
            <div class="payment-methods">
              <button class="pay-btn active" data-method="card">신용/체크카드</button>
              <button class="pay-btn" data-method="account">계좌이체</button>
              <button class="pay-btn" data-method="transfer">무통장입금</button>
              <button class="pay-btn" data-method="phone">휴대폰 결제</button>
            </div>
          </div>

          <!-- 약관 동의 -->
          <div class="section-block">
            <h3><span class="circle-number">5</span> 약관 동의</h3>
            <label><input type="checkbox" id="agreeTerms" /> 모아 이용 약관에 동의합니다.</label><br />
            <label><input type="checkbox" id="agreePrivacy" /> 개인정보 수집 및 이용에 동의합니다.</label>
          </div>
        </div>

        <!-- 결제 요약 -->
        <div class="payment-summary">
          <h3><span class="circle-number">6</span> 총 결제금액</h3>
          <div class="summary-box">
            <p>총 결제금액</p>
            <h2 id="totalPrice">0원</h2>
            <hr />
            <p>총 1건 <span id="itemPrice">0원</span></p>
            <button id="payNowBtn">결제하기</button>
          </div>
        </div>
      </section>
    </main>

    <!-- PortOne & Script -->
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://cdn.iamport.kr/js/iamport.payment-1.2.0.js"></script>
    <script th:src="@{/js/pay/pay.js}"></script>
  </body>
</html>
