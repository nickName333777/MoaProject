<section class="pm-list" th:with="pagination=${map.pagination}, pmList=${map.pmList}">

    <!-- 게시글 목록 조회 결과가 비어있다면 -->
    <th:block th:if="${#lists.size(pmList) == 0}">
        <tr>
            <th colspan="6">게시글이 존재하지 않습니다.</th>
        </tr>
    </th:block>

    <!-- 정렬 방식 선택 -->
    <section class="seeType" id="seeType">

        <select id="selectOrder">
            <option value="latest">최근 업데이트 순</option>
            <option value="popular">조회순</option>
        </select>

        <!-- 정렬 모양 -->
        <!-- 
        <div class="view-mode">
            <i class="fa-solid fa-list"></i>
            <i class="bi bi-grid-fill" style="display:none"></i>
        </div> 
        -->
    </section>

    <!--
    <article class="pm-item">
        <img src="http://www.kopis.or.kr/upload/pfmPoster/PF_PF275265_250929_145553.gif" alt="포스터" class="poster" />
        <div class="pm-info">
            <h3 class="title">[재즈] 미노와 히로유키 재즈 콘서트</h3>
                <div class="pm-info-detail">
                    <p class="city">서울특별시</p>
                    <p class="place">예술의전당</p>
                    <p class="date">2025.10.01 ~ 2025.10.19</p>
                    <p class="count">170,000 회</p>
                </div>
        </div>
    </article>
    -->
    <!-- 결과 -->
    <article th:unless="${#lists.size(pmList) == 0}" class="pm-item" th:each=" board : ${pmList}">
        <img th:if="${board.poster}" th:src="${board.poster}" class="poster" />
        <a th:href="@{/board/4/{boardNo}(boardNo=${board.boardNo},type=${param.type != null ? param.type : 'all'},cp=${pagination.currentPage != 1 ? pagination.currentPage : null})}">
            <div class="pm-info">
                <h3 class="title" th:utext="${board.boardTitle}">[재즈] 미노와 히로유키 재즈 콘서트</h3>
                    <div class="pm-info-detail">
                        <p class="city" th:text="${#strings.arraySplit(board.pmHouseAddress, ' ')[0]}">서울특별시</p>
                        <p class="place" th:text="${board.pmHouseName}">예술의전당</p>
                        <p class="date" th:text="|${board.pmStartTime} ~ ${board.pmEndTime}|">2025.10.01 ~ 2025.10.19</p>
                        <p class="count" th:text="|${board.boardCount} 회|">170,000 회</p>
                    </div>
            </div>
        </a>
    </article>

    <!-- 페이지네이션 -->
    <div th:if="${#lists.size(pmList) > 0}" class="pagination-area">
        <ul class="pagination">
            <!-- 처음으로 -->
            <li><a th:href="@{/board/4/pmTypeList(type=${param.type}, cp=1)}">&lt;&lt;</a></li>

            <!-- 이전 페이지 -->
            <li><a th:href="@{/board/4/pmTypeList(type=${param.type}, cp=${pagination.prevPage})}">&lt;</a></li>

            <!-- 페이지 번호 -->
            <th:block th:each="i : ${#numbers.sequence(pagination.startPage, pagination.endPage, 1)}">
            <li th:if="${pagination.currentPage == i}">
                <a class="current" th:text="${i}">현재</a>
            </li>
            <li th:unless="${pagination.currentPage == i}">
                <a th:href="@{/board/4/pmTypeList(type=${param.type}, cp=${i})}" th:text="${i}">페이지</a>
            </li>
            </th:block>

            <!-- 다음 페이지 -->
            <li><a th:href="@{/board/4/pmTypeList/(type=${param.type}, cp=${pagination.nextPage})}">&gt;</a></li>

            <!-- 마지막 페이지 -->
            <li><a th:href="@{/board/4/pmTypeList/(type=${param.type}, cp=${pagination.maxPage})}">&gt;&gt;</a></li>
        </ul>
    </div>

</section>
